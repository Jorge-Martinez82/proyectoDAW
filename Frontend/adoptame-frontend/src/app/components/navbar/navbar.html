<header class="relative z-10 m-2">
  <nav class="flex items-center justify-between">
    <a routerLink="/" class="flex items-center gap-3">
      <img src="assets/img/logo.png" alt="logo de adoptame" class="h-10" />
      <p class="font-montserrat font-bold">Adóptame</p>
    </a>

    <!-- menu escritorio -->
    <div class="absolute left-1/2 hidden -translate-x-1/2 transform sm:block">
      <ul class="flex gap-6 font-roboto">
        <li>
          <a routerLink="/animales"
             routerLinkActive="border-b-2 border-customBlue text-customBlue"
             class="pb-2 transition duration-300 hover:text-customBlue">
            Mascotas
          </a>
        </li>
        <li>
          <a routerLink="/protectoras"
             routerLinkActive="border-b-2 border-customBlue text-customBlue"
             class="pb-2 transition duration-300 hover:text-customBlue">
            Protectoras
          </a>
        </li>
        <li>
          <a routerLink="/about"
             routerLinkActive="border-b-2 border-customBlue text-customBlue"
             class="pb-2 transition duration-300 hover:text-customBlue">
            Sobre nosotros
          </a>
        </li>
      </ul>
    </div>

    <div class="hidden sm:flex items-center gap-4">
      <a *ngIf="!authService.isLoggedIn()"
         routerLink="/login"
         class="rounded-lg border-2 border-customBlue px-4 py-1 font-roboto font-bold text-black transition duration-300 hover:bg-customBlue hover:text-white">
        Iniciar sesión
      </a>

      <div *ngIf="authService.isLoggedIn()" class="flex items-center gap-4">
        <a routerLink="/perfil"
           routerLinkActive="border-b-2 border-customBlue text-customBlue"
           role="menuitem"
           class="flex pb-2 transition duration-300 hover:text-customBlue"
           (click)="closeMenu()">
          <svg class="h-6 w-6 text-gray-700" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" />
            <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
          <span>Perfil</span>
        </a>
        <button (click)="logout()"
                class="rounded-lg border-2 border-red-500 px-2 py-0.5 text-sm font-roboto font-bold text-red-500 transition duration-300 hover:bg-red-500 hover:text-white">
          Cerrar sesión
        </button>
      </div>
    </div>

    <!--  menu movil -->
    <button
      type="button"
      class="block sm:hidden p-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-customBlue"
      aria-label="Abrir menú"
      aria-controls="mobile-menu"
      [attr.aria-expanded]="isMenuOpen ? 'true' : 'false'"
      (click)="toggleMenu()">
      <svg class="h-8 w-8 text-gray-800" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M4 6h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M4 12h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </nav>

  <div *ngIf="isMenuOpen" class="fixed inset-0 z-[60] bg-transparent sm:hidden" (click)="closeMenu()" aria-hidden="true"></div>

  <div
    id="mobile-menu"
    *ngIf="isMenuOpen"
    class="absolute left-0 right-0 top-16 z-[70] sm:hidden">
    <ul class="mx-2 flex flex-col items-stretch gap-2 rounded-lg bg-white p-4 shadow-lg"
        role="menu">
      <li role="none">
        <a routerLink="/animales"
           role="menuitem"
           class="block rounded-md px-3 py-2 font-roboto transition hover:bg-gray-100"
           (click)="closeMenu()">
          Mascotas
        </a>
      </li>
      <li role="none">
        <a routerLink="/protectoras"
           role="menuitem"
           class="block rounded-md px-3 py-2 font-roboto transition hover:bg-gray-100"
           (click)="closeMenu()">
          Protectoras
        </a>
      </li>
      <li role="none">
        <a routerLink="/about"
           role="menuitem"
           class="block rounded-md px-3 py-2 font-roboto transition hover:bg-gray-100"
           (click)="closeMenu()">
          Sobre nosotros
        </a>
      </li>

      <li role="none" class="mt-2">
        <a *ngIf="!authService.isLoggedIn()"
           routerLink="/login"
           role="menuitem"
           class="block w-full rounded-lg border-2 border-customBlue px-4 py-1 text-center font-roboto font-bold text-black transition duration-300 hover:bg-customBlue hover:text-white"
           (click)="closeMenu()">
          Iniciar sesión
        </a>

        <div *ngIf="authService.isLoggedIn()" class="flex flex-col gap-2">
          <a routerLink="/perfil"
             role="menuitem"
             class="flex items-center gap-3 rounded-md px-3 py-2 font-roboto transition hover:bg-gray-100"
             (click)="closeMenu()">
            <svg class="h-6 w-6 text-gray-700" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" />
              <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
            <span>Perfil</span>
          </a>
          <button (click)="logout()" role="menuitem"
                  class="rounded-lg border-2 border-red-500 px-2 py-0.5 text-sm font-roboto font-bold text-red-500 transition duration-300 hover:bg-red-500 hover:text-white">
            Cerrar sesión
          </button>
        </div>
      </li>
    </ul>
  </div>
</header>
