<main>
  <!-- FILTROS -->
  <section class="relative flex h-80 w-full items-center justify-center px-2 sm:px-0">
    <div class="absolute inset-0 bg-[url('assets/img/fondo_Adopcion.webp')] bg-cover bg-center opacity-30"></div>

    <div class="relative flex w-full max-w-2xl rounded-3xl bg-black bg-opacity-70 p-6">
      <div class="w-full">
        <app-formulario-busqueda [modo]="'animales'"
                                 (busquedaRealizada)="buscar($event)">
        </app-formulario-busqueda>
      </div>
    </div>
  </section>

  <!-- RESULTADOS -->
  <section class="relative rounded-lg bg-customPurple p-10">
    <div class="absolute inset-0 rounded-lg bg-[url('assets/img/huellas.png')] bg-cover bg-center opacity-80"></div>

    <div class="relative w-full lg:w-3/4 mx-auto">
      
      <app-spinner *ngIf="loading"></app-spinner>

      <div *ngIf="error && !loading" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
        <p>{{ error }}</p>
      </div>

      <div *ngIf="!loading && !error">
        <h2 class="mb-6 text-2xl font-bold text-gray-800">
          {{ totalCount }} resultados
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          <app-tarjeta-animales 
            *ngFor="let animal of animales | paginate: {
              itemsPerPage: pageSize,
              currentPage: currentPage,
              totalItems: totalCount
            }"
            [animal]="animal">
          </app-tarjeta-animales>
        </div>

        <div *ngIf="animales.length === 0" class="text-center py-8">
          <p class="text-lg font-bold">No se encontraron animales con los filtros seleccionados</p>
        </div>

        <pagination-controls 
          *ngIf="animales.length > 0"
          (pageChange)="onPageChange($event)"
          previousLabel="Anterior"
          nextLabel="Siguiente"
          [responsive]="true"
          class="flex justify-center mt-8">
        </pagination-controls>
      </div>
    </div>
  </section>
</main>
