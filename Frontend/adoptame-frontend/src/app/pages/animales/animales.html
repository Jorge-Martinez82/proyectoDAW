<main>
  <!-- FILTROS -->
  <section class="relative flex h-80 w-full items-center justify-center">
    <div class="absolute inset-0 bg-[url('assets/img/gato-mascotas.webp')] bg-cover bg-center opacity-30"></div>

    <div class="relative flex w-[100%] max-w-2xl rounded-3xl bg-black bg-opacity-70 p-6">
      <div class="flex w-full flex-col gap-4 md:flex-row">
        <div class="w-full">
          <label for="tipo" class="mb-2 block text-sm font-semibold text-white">
            Tipo de mascota
          </label>
          <select [(ngModel)]="filters.tipo" id="tipo" class="w-full rounded p-2">
            <option value="todos">Todos los tipos</option>
            <option value="Perro">üê∂ Perros</option>
            <option value="Gato">üê± Gatos</option>
            <option value="Roedor">üê∞ Roedores</option>
            <option value="Reptil">üê¢ Reptiles</option>
          </select>
        </div>

        <div class="w-full">
          <label for="provincia" class="mb-2 block text-sm font-semibold text-white">
            Localizaci√≥n
          </label>
          <select [(ngModel)]="filters.provincia" id="provincia" class="w-full rounded p-2">
            <option value="todos">Todas</option>
            <option value="Navarra">Navarra</option>
            <option value="√Ålava">√Ålava</option>
            <option value="Guip√∫zcoa">Guip√∫zcoa</option>
            <option value="Vizcaya">Vizcaya</option>
          </select>
        </div>

        <div class="self-end">
          <button (click)="buscar()" class="rounded-full bg-customBlue px-6 py-2 font-semibold text-white hover:bg-customBlueHover">
            Buscar
          </button>
        </div>
      </div>
    </div>
  </section>


  <!-- RESULTADOS -->
  <section class="relative rounded-lg bg-customPurple p-10">
    <div class="absolute inset-0 rounded-lg bg-[url('assets/img/huellas.png')] bg-cover bg-center opacity-80"></div>

    <div class="relative w-full lg:w-3/4 mx-auto">
      <div *ngIf="loading" class="text-center py-8">
        <p class="text-lg font-bold">Cargando animales...</p>
      </div>

      <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
        <p>{{ error }}</p>
      </div>

      <div *ngIf="!loading && !error">
        <h2 class="mb-6 text-2xl font-bold text-gray-800">
          {{ totalCount }} resultados
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          <app-tarjeta-animales *ngFor="let animal of animales | paginate: {
              itemsPerPage: pageSize,
              currentPage: currentPage,
              totalItems: totalCount
            }"
                                [animal]="animal">
          </app-tarjeta-animales>
        </div>

        <div *ngIf="animales.length === 0" class="text-center py-8">
          <p class="text-lg font-bold">No hay animales disponibles</p>
        </div>

        <!-- PAGINACI√ìN -->
        <pagination-controls (pageChange)="onPageChange($event)"
                             previousLabel="Anterior"
                             nextLabel="Siguiente"
                             [responsive]="true"
                             class="flex justify-center mt-8">
        </pagination-controls>
      </div>
    </div>
  </section>
</main>
