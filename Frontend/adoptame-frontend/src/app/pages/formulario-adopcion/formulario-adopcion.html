<main class="flex flex-grow items-center justify-center bg-customPurple bg-[url('assets/img/huellas.png')]">
  <section id="seccion-principal" class="flex flex-col flex-grow items-center justify-center">

    <app-spinner *ngIf="loading"></app-spinner>

    <div *ngIf="!loading && animalNoEncontrado" class="w-[50%] text-center bg-white rounded-lg shadow-lg p-8">
      <p class="text-2xl font-bold text-red-600">Animal no encontrado</p>
      <p class="text-gray-600 mt-2">Lo sentimos, no pudimos encontrar la información de este animal.</p>
      <div class="mt-6">
        <app-boton-volver></app-boton-volver>
      </div>
    </div>

    <div *ngIf="!loading && animal" class="flex flex-col items-start max-w-4xl w-full px-10 my-10">

      <div class="mb-4">
        <app-boton-volver texto="Volver al detalle"></app-boton-volver>
      </div>

      <form [formGroup]="formulario"
            (ngSubmit)="onSubmit()"
            class="w-full flex flex-col items-center justify-around rounded-3xl bg-black bg-opacity-75 p-10 py-5 font-roboto text-white">
        <h2 class="font-roboto text-lg font-bold md:text-2xl text-white mb-4">
          Solicitud de adopción para {{ animal.nombre }}
        </h2>

        <div class="w-full flex flex-col md:flex-row gap-4 my-2">
          <div class="w-full md:w-1/2">
            <label for="nombre" class="font-medium text-white self-start">Nombre *</label>
            <input type="text"
                   id="nombre"
                   formControlName="nombre"
                   class="w-full pl-4 rounded-lg bg-white p-2 text-gray-800"
                   placeholder="Introduce tu nombre"
                   [class.border-2]="campoInvalido('nombre')"
                   [class.border-red-500]="campoInvalido('nombre')" />
            <small class="block mt-1 pl-4">Ejemplo: Pedro</small>
            <small *ngIf="campoInvalido('nombre')" class="block mt-1 pl-4 text-red-300">
              El nombre es obligatorio y solo debe contener letras
            </small>
          </div>

          <div class="w-full md:w-1/2">
            <label for="apellidos" class="font-medium text-white self-start">Apellidos *</label>
            <input type="text"
                   id="apellidos"
                   formControlName="apellidos"
                   class="w-full pl-4 rounded-lg bg-white p-2 text-gray-800"
                   placeholder="Introduce tus apellidos"
                   [class.border-2]="campoInvalido('apellidos')"
                   [class.border-red-500]="campoInvalido('apellidos')" />
            <small class="block mt-1 pl-4">Ejemplo: Alonso González</small>
            <small *ngIf="campoInvalido('apellidos')" class="block mt-1 pl-4 text-red-300">
              Los apellidos son obligatorios
            </small>
          </div>
        </div>

        <div class="my-2 w-full">
          <label for="dni" class="font-medium text-white self-start">DNI *</label>
          <input type="text"
                 id="dni"
                 formControlName="dni"
                 (blur)="validarDNI()"
                 class="w-full pl-4 rounded-lg bg-white p-2 text-gray-800"
                 placeholder="Introduce tu DNI"
                 maxlength="9"
                 [class.border-2]="campoInvalido('dni')"
                 [class.border-red-500]="campoInvalido('dni')" />
          <small class="block mt-1 pl-4">Ejemplo: 12345678Z</small>
          <small *ngIf="campoInvalido('dni')" class="block mt-1 pl-4 text-red-300">
            DNI inválido (debe tener 8 números y 1 letra)
          </small>
        </div>

        <div class="my-2 w-full">
          <label for="direccion" class="font-medium text-white self-start">Dirección *</label>
          <input type="text"
                 id="direccion"
                 formControlName="direccion"
                 class="w-full pl-4 rounded-lg bg-white p-2 text-gray-800"
                 placeholder="Introduce tu dirección"
                 [class.border-2]="campoInvalido('direccion')"
                 [class.border-red-500]="campoInvalido('direccion')" />
          <small class="block mt-1 pl-4">Ejemplo: Calle Falsa 123 10 1D</small>
        </div>

        <div class="w-full flex flex-col md:flex-row gap-4 my-2">
          <div class="w-full md:w-2/3">
            <label for="localidad" class="font-medium text-white self-start">Localidad *</label>
            <input type="text"
                   id="localidad"
                   formControlName="localidad"
                   class="w-full pl-4 rounded-lg bg-white p-2 text-gray-800"
                   placeholder="Introduce tu localidad"
                   [class.border-2]="campoInvalido('localidad')"
                   [class.border-red-500]="campoInvalido('localidad')" />
            <small class="block mt-1 pl-4">Ejemplo: Pamplona</small>
          </div>

          <div class="w-full md:w-1/3">
            <label for="codigoPostal" class="font-medium text-white self-start">Código Postal *</label>
            <input type="text"
                   id="codigoPostal"
                   formControlName="codigoPostal"
                   class="w-full pl-4 rounded-lg bg-white p-2 text-gray-800"
                   placeholder="CP"
                   maxlength="5"
                   [class.border-2]="campoInvalido('codigoPostal')"
                   [class.border-red-500]="campoInvalido('codigoPostal')" />
            <small class="block mt-1 pl-4">Ejemplo: 31001</small>
          </div>
        </div>

        <div class="my-2 w-full">
          <label for="provincia" class="font-medium text-white self-start">Provincia *</label>
          <select id="provincia"
                  formControlName="provincia"
                  class="w-full rounded-lg bg-white p-2 text-gray-800"
                  [class.border-2]="campoInvalido('provincia')"
                  [class.border-red-500]="campoInvalido('provincia')">
            <option value="">Selecciona tu provincia</option>
            <option value="Navarra">Navarra</option>
            <option value="Álava">Álava</option>
            <option value="Guipúzcoa">Guipúzcoa</option>
            <option value="Vizcaya">Vizcaya</option>
          </select>
        </div>

        <div class="mt-4 flex items-center">
          <input type="checkbox"
                 id="mayorEdad"
                 formControlName="mayorEdad"
                 class="h-4 w-4 rounded border-gray-300 text-customBlue focus:ring-customBlue" />
          <label for="mayorEdad" class="ml-2 text-sm font-medium text-white">
            Soy mayor de edad *
          </label>
        </div>
        <small *ngIf="campoInvalido('mayorEdad')" class="block mt-1 text-red-300">
          Debes ser mayor de edad para adoptar
        </small>

        <div class="mt-5">
          <app-boton-principal [tipo]="'submit'"
                               [texto]="'Enviar solicitud'"
                               [disabled]="formulario.invalid">
          </app-boton-principal>
        </div>
      </form>
    </div>

  </section>
</main>
